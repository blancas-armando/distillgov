version: 2

models:
  - name: stg_members
    description: Staging layer for Congress members
    columns:
      - name: bioguide_id
        description: Unique identifier from bioguide.congress.gov
        tests:
          - unique
          - not_null
      - name: chamber
        tests:
          - accepted_values:
              values: ["house", "senate"]

  - name: stg_bills
    description: Staging layer for bills and resolutions
    columns:
      - name: bill_id
        description: "Composite key: {congress}-{type}-{number}"
        tests:
          - unique
          - not_null
      - name: congress
        tests:
          - not_null
      - name: bill_type
        tests:
          - not_null
          - accepted_values:
              values: ["hr", "s", "hjres", "sjres", "hconres", "sconres", "hres", "sres"]

  - name: stg_votes
    description: Staging layer for roll call votes
    columns:
      - name: vote_id
        tests:
          - unique
          - not_null
      - name: chamber
        tests:
          - not_null
          - accepted_values:
              values: ["house", "senate"]

  - name: stg_member_votes
    description: Staging layer for individual member voting positions
    columns:
      - name: vote_id
        tests:
          - not_null
      - name: bioguide_id
        tests:
          - not_null
      - name: position
        tests:
          - not_null
          - accepted_values:
              values: ["Yes", "No", "Yea", "Nay", "Present", "Not Voting"]

  - name: stg_bill_cosponsors
    description: Staging layer for bill cosponsor relationships
    columns:
      - name: bill_id
        tests:
          - not_null
      - name: bioguide_id
        tests:
          - not_null

  - name: stg_bill_actions
    description: Staging layer for bill action timeline events
    columns:
      - name: bill_id
        tests:
          - not_null

  - name: stg_trades
    description: Staging layer for member stock trade disclosures
    columns:
      - name: trade_id
        tests:
          - unique
          - not_null

  - name: stg_zip_districts
    description: Staging layer for zip code to congressional district mappings
    columns:
      - name: zcta
        tests:
          - not_null
      - name: state
        tests:
          - not_null
      - name: district
        tests:
          - not_null

  - name: stg_committees
    description: Staging layer for congressional committees
    columns:
      - name: committee_id
        tests:
          - unique
          - not_null

  - name: stg_committee_members
    description: Staging layer for committee membership assignments
    columns:
      - name: committee_id
        tests:
          - not_null
      - name: bioguide_id
        tests:
          - not_null

  - name: stg_bill_subjects
    description: Staging layer for legislative subject tags
    columns:
      - name: bill_id
        tests:
          - not_null
      - name: subject
        tests:
          - not_null
